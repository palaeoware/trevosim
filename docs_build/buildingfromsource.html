<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. Compiling from Source and Development Testing &mdash; TREvoSim 3.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=86f27845" />

  
  
        <script src="_static/documentation_options.js?v=dd1205ac"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Algorithm, Concepts, and Experimental Design" href="algorithmconcepts.html" />
    <link rel="prev" title="2. Requirements and Installation from Binaries" href="requirementsinstallation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            TREvoSim
              <img src="_static/TREvoSim.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirementsinstallation.html">2. Requirements and Installation from Binaries</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Compiling from Source and Development Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#compiling-from-source">3.1. Compiling from Source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#windows-10">3.1.1. Windows 10</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiling-v3-x">3.1.1.1. Compiling v3.X</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-v1-x-2-x">3.1.1.2. Compiling v1.X, 2.X</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ubuntu">3.1.2. Ubuntu</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiling-v3-x-using-command-line">3.1.2.1. Compiling v3.X using command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-v3-x-remotely-using-command-line">3.1.2.2. Compiling v3.X remotely using command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-v1-x-v2-x-using-command-line">3.1.2.3. Compiling v1.X &amp; v2.X using command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-v1-x-v2-x-v3-x-using-qt-creator">3.1.2.4. Compiling v1.X, v2.X, v3.X using Qt Creator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#macos">3.1.3. MacOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#for-v1-x-2-x-v3-x">3.1.3.1. For v1.X, 2.X, v3.X</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#development-testing">3.2. Development Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="algorithmconcepts.html">4. Algorithm, Concepts, and Experimental Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="windowlayout.html">5. Window Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">6. Settings - Organisms and simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings2.html">7. Settings - Environment, events and playing fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="loggingsim.html">8. Logging the Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="filecommands.html">9. Menu commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="commandline.html">10. Command Line Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="software_tests.html">11. Tests</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TREvoSim</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">3. </span>Compiling from Source and Development Testing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/buildingfromsource.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="buildingfromsource"></span><section id="compiling-from-source-and-development-testing">
<h1><span class="section-number">3. </span>Compiling from Source and Development Testing<a class="headerlink" href="#compiling-from-source-and-development-testing" title="Link to this heading">¶</a></h1>
<section id="compiling-from-source">
<h2><span class="section-number">3.1. </span>Compiling from Source<a class="headerlink" href="#compiling-from-source" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unless you would like to modify the software you <em>do not</em> need to build it – you can install or run it using the binaries provided with releases. See <a class="reference internal" href="requirementsinstallation.html#requirements-and-installation-from-binaries"><span class="std std-ref">Requirements and Installation from Binaries</span></a> for further information.</p>
</div>
<section id="windows-10">
<h3><span class="section-number">3.1.1. </span>Windows 10<a class="headerlink" href="#windows-10" title="Link to this heading">¶</a></h3>
<section id="compiling-v3-x">
<h4><span class="section-number">3.1.1.1. </span>Compiling v3.X<a class="headerlink" href="#compiling-v3-x" title="Link to this heading">¶</a></h4>
<p>QT Creator + QT v6.x using Qt installer and MSVC2019 (64-bit).</p>
<ol class="arabic">
<li><p>Install Microsoft Visual Studio 2019 (VS2019). See <a class="reference external" href="https://visualstudio.microsoft.com/vs/older-downloads/">https://visualstudio.microsoft.com/vs/older-downloads/</a>.</p></li>
<li><p>Install Qt 6.X and QT Creator on your system by running the open source development installer from Qt: <a class="reference external" href="https://www.qt.io/download-open-source">https://www.qt.io/download-open-source</a></p>
<ul class="simple">
<li><p>During the installation you will need to select the ‘MSVC 2019 64-bit’ and ‘Qt 5 Compatability Module’ components under the QT 6.7.3 sub-category.</p></li>
<li><p>During the installation check that under the ‘Development and Designer Tools’ sub-category that ‘QT Creator X.X.X’, ‘Debugging Tools for Windows’, ‘CMake X.X.X’, and ‘Ninja X.X.X’ are selected.</p></li>
<li><p>If you forget or need to amend/check which components are active you can run the QT Maintenance tool (which gets installed automatically) and add/remove/update them post-installation.</p></li>
</ul>
</li>
<li><p>Install Git - this is required by CMake during the build to pull the latest version of GoogleTest - download from: <a class="reference external" href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></p></li>
<li><p>Add Ninja (installed by QT) and Git to your Windows PATH environment variable.</p>
<ul class="simple">
<li><p>Open the Start Search, type in “env”, and choose ‘Edit the system environment variables’.</p></li>
<li><p>Click the ‘Environment Variables…’ button.</p></li>
<li><p>From the ‘System Variables’ section, find the entry called “Path” in the variable column, and click the ‘Edit…’ button.</p></li>
<li><p>The ‘Edit environment variable’ window will appear.</p></li>
<li><p>Click ‘New’ and type in the path to the QT Ninja install folder - the default is: C:\Qt\Tools\Ninja.</p></li>
<li><p>Repeat with the path to the Git git.exe folder - the default is: C:\Program Files\Git\cmd.</p></li>
<li><p>Save the new settings by pressing the ‘OK’ button.</p></li>
<li><p>At this point you may need to restart Windows for the settings to take affect or at the very least restart QT Creator if it is already running.</p></li>
</ul>
</li>
<li><p>Download or clone using Git the TREvoSim source code from the GitHub repository: <a class="reference external" href="https://github.com/palaeoware/trevosim">https://github.com/palaeoware/trevosim</a></p></li>
<li><p>Run QT Creator and configure the build pipeline. QT Creator should automatically detect your Microsoft Visual Studio 2019 installation and configure the build chain. However, if you have multiple versions installed - or if you get errors in the steps subsequent to this one, you might need to manually change QT creator to use the VisualStudio 2019 Toolkit. To do this, select projects in the left hand toolbar of Qt Creator (ctrl + 5), and then select the kit labelled with the version of Qt you installed, plus “MSVC2019 64bit” under the ‘Build and Run’ section.</p></li>
<li><p>In QT Creator using the main menu ‘File → Open File or Project…’ navigating to and select the TREvoSim CMakeLists.txt file in the root of the source code folder. This will open the TREvoSim project within the workspace.</p></li>
<li><p>From QT Creator you can build debug and release version of TREvoSim. The easiest way is via the bottom left ‘Build’ button. Alternatively you can use the ‘Build → Build All Projects…’ from the main menu.  Check that TREvoSim is selected the deploy configuration (computer monitor icon), rather than TREvoSimTest.</p></li>
<li><p>Once you have built the release version of TREvoSim through QT Creator, and you if wish to make the binary useable outside of the QT Creator environment (either as a standalone distribution or for use with an installer), you will need to run the Qt Windows Deployment tool. This tool automates the process of creating a deployable folder that contains all QT-related dependencies to make TREvoSim run (e.g., .DLL libraries).</p>
<ul>
<li><p>First step is to copy to a new folder (we called ours ‘deploy’ and will refer to this by name) the newly generated binaries (TREvoSim.exe and TREvoSimTest.exe) from your build folder. The build folder should be called ‘build\Desktop_Qt_6_7_3_MSVC2019_64bit-Release’ if using the QT defaults, where Qt_6_7_3 will change to match your current QT 6 version.</p></li>
<li><p>From the windows command line ‘’’cd’’’ into the ‘{path to your QT installation}\{QT 6 version}\msvc2019_64\bin\’ folder containing the windeployqt6.exe binary and run the following commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">qtenv2.bat</span>
<span class="go">&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvars64.bat&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<blockquote>
<div><p>(where ‘C:\Program Files (x86)\Microsoft Visual Studio’ is your path to the installed VS2019)</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">windeployqt6 {full path to TREvoSim binary}\TREvoSim.exe  --release</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<ul class="simple">
<li><p>Your deploy folder should now look like this:</p></li>
</ul>
<figure class="align-default">
<img alt="_images/post_windeploy.png" src="_images/post_windeploy.png" />
</figure>
<ul class="simple">
<li><p>You can now test if this has worked successfully by attempting to run the TREvoSim.exe binary in the deploy folder. It should run without any missing libraries warnings.</p></li>
<li><p>Next run the same windeployqt6 comand but for your TREvoSimTest.exe program.</p></li>
<li><p>For the GoogleTest framework to run under TREvoSimTest.exe you need to copy the gtest.dll and gtest_main.dll from the ./bin folder (under your build folder) to the deploy folder.</p></li>
<li><p>You can now test if this has worked successfully by attempting to run the TREvoSimTest.exe binary in the deploy folder. It should run without any missing libraries warnings.</p></li>
<li><p>For more information on how this works see: <a class="reference external" href="https://doc.qt.io/qt-6/windows-deployment.html">https://doc.qt.io/qt-6/windows-deployment.html</a></p></li>
</ul>
</li>
<li><p>[Optional] To package the application as Windows portable binary release simply compress the deploy folder as a .ZIP archive and rename the new file to TREvoSim_v3.X.X.zip.</p></li>
<li><p>[Optional] To package the application as Windows Installation Binary for distribution we recommend using Inno Setup v6.x: <a class="reference external" href="https://jrsoftware.org/isinfo.php">https://jrsoftware.org/isinfo.php</a></p>
<ul class="simple">
<li><p>Inno Setup is a free installer for Windows programs by Jordan Russell and Martijn Laan.</p></li>
<li><p>The file TREvoSim_Installer_v3.x.x_dev.iss under the ./build_utils/windows/inno_setup folder is provided as a template. Copy this file to the deploy folder you created earlier.</p></li>
<li><p>Open this file in InnoSetup - if you associated .ISS files with InnoStup during its installation you will be able to double click this file. It will look similar to this:</p></li>
</ul>
<figure class="align-default">
<img alt="_images/innosetup.png" src="_images/innosetup.png" />
</figure>
<ul class="simple">
<li><p>Next you need to create a new folder under your deploy folder called ‘bin’.</p></li>
<li><p>Copy all files other than .ISS file into the ./bin folder.</p></li>
<li><p>The template .ISS files is expecting a LICENSE.md files to be in the ./bin folder as well. This file must be copied from the TREvoSim source folder root.</p></li>
<li><p>You can now Compile the installer in Inno Setup. Press the small blue arrow pointing down on the tool bar, or from the main menu ‘Build → Compile’. Inno Setup will then compile, compress, and create the a install binary in a folder called ./build. Note the template file is set to run the installation post creations - this may be canceled if you do not want to install straight away.</p></li>
<li><p>You can now distribute the TREvoSimInstaller_v3.0.0_win_x64.exe under the ./build folder that was created. Note the name of the installation binary is controlled by the .ISS file and can be changed there.</p></li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note Visual Studio 2022 should also work but has not yet been tested with TREvoSim.</p>
</div>
</section>
<section id="compiling-v1-x-2-x">
<h4><span class="section-number">3.1.1.2. </span>Compiling v1.X, 2.X<a class="headerlink" href="#compiling-v1-x-2-x" title="Link to this heading">¶</a></h4>
<p>QT Creator + QT v5.x using MSYS2 (64-bit) and MinGW (64-bit).</p>
<p>We recommend you install and use MSYS2 (64-bit) a Windows package manager, based on modern Cygwin (POSIX compatibility layer) and MinGW-w64, that allows easy installation of QT v5.x 64-bit.</p>
<ol class="arabic">
<li><p>Download and run the latest version of <a class="reference external" href="https://www.msys2.org/">MSYS2</a> for 64-bit Windows. This will be name “MSYS2-x86_64-…” for the 64-bit installer.</p></li>
<li><p>Follow the install instructions. We have used the default install location of “C:mysys64&quot; and it is here that includes required in the .pro files point. If you install MSYS2 to another location the .pro files will need to be updated to your install location.</p></li>
<li><p>Once installed open up MSYS2 shell and run the pacman update command: pacman -Syu Note that as this will almost certainly update pacman itself you may have to close down and restart the MSYS2 shell before re-running the command to finish.</p></li>
<li><p>Once MSYS2 and pacman are fully updated run the following command to install QT 5.x and its dependencies: pacman -S mingw-w64-x86_64-qt-creator mingw-w64-x86_64-qt5</p></li>
<li><p>Optional - if you intend on debugging the software in QT and wish to use GDB then run the following to install the matching GBD debugger: pacman -S mingw-w64-x86_64-gdb</p></li>
<li><p>At this stage you should have the following under the MSYS2 install location:</p>
<blockquote>
<div><ul class="simple">
<li><p>{install location}/mingw64 (Main ming64 folder)</p></li>
<li><p>{install location}/mingw64/bin/qmake.exe (QMake for QT version)</p></li>
<li><p>{install location}/mingw64/bin/g++.exe (C++ complier)</p></li>
<li><p>{install location}/mingw64/bin/gcc.exe (C complier)</p></li>
<li><p>{install location}/mingw64/bin/gdb.exe (Debugger | OPTIONAL)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>You should now be able to find the required libraries under “{install location}/mingw64/bin” and the required header (.h) files for QT v5.x.</p></li>
<li><p>Open the .pro file in QT Creator, and then use the information above to setup a new 64-bit ming64 kit. Follow standard QT Creator debug/release procedure.</p></li>
</ol>
</section>
</section>
<section id="ubuntu">
<h3><span class="section-number">3.1.2. </span>Ubuntu<a class="headerlink" href="#ubuntu" title="Link to this heading">¶</a></h3>
<section id="compiling-v3-x-using-command-line">
<h4><span class="section-number">3.1.2.1. </span>Compiling v3.X using command line<a class="headerlink" href="#compiling-v3-x-using-command-line" title="Link to this heading">¶</a></h4>
<p>This has been tested on Ubuntu 22.04 and 24.04 64-bit with QT v6.x using GCC (64-bit).</p>
<ol class="arabic">
<li><p>Install GCC and Qt using system packages:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt-get install build-essential libgl1-mesa-dev cmake</span>
<span class="go">sudo apt install qt6-base-dev libqt6core5compat6-dev</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Download source code and navigate to folder, or alternatively clone using Git:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://github.com/palaeoware/trevosim.git</span>
<span class="go">cd trevosim</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Within TREvoSim folder, run the following commands to build the software:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake .</span>
<span class="go">cmake --build .</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Launch the software by double clicking on the TREvoSim binary that has been created in this folder, or run the binary from the command line.</p></li>
</ol>
</section>
<section id="compiling-v3-x-remotely-using-command-line">
<h4><span class="section-number">3.1.2.2. </span>Compiling v3.X remotely using command line<a class="headerlink" href="#compiling-v3-x-remotely-using-command-line" title="Link to this heading">¶</a></h4>
<p>If building and running TREvoSim via SSH on Linux is required (e.g. on a cluster), this can be achieved, after installing packages and cloning the source code (see above) as follows:</p>
<ol class="arabic">
<li><p>Generate a buildsystem by specifying the source and build directories – this command, updated to specify the source and build directories, will build a release, and assumes the default path for Qt using Ubuntu system packages:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake -DCMAKE_PREFIX_PATH=/usr/lib/qt6/ -DCMAKE_BUILD_TYPE=Release -S YOUR_SOURCE_DIRECTORY -B YOUR_BUILD_DIRECTORY</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Then build the software:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake --build YOUR_BUILD_DIRECTORY</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>This will create a binary, which can be run from the command line. See <a class="reference internal" href="commandline.html#command-line-options"><span class="std std-ref">Command Line Options</span></a> for more details on running this binary remotely.</p>
</section>
<section id="compiling-v1-x-v2-x-using-command-line">
<h4><span class="section-number">3.1.2.3. </span>Compiling v1.X &amp; v2.X using command line<a class="headerlink" href="#compiling-v1-x-v2-x-using-command-line" title="Link to this heading">¶</a></h4>
<p>This has been tested on Ubuntu 18.04 and 2204, with QT v5.x using GCC (64-bit).</p>
<ol class="arabic">
<li><p>Install GCC and Qt using system packages:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt-get install build-essential libgl1-mesa-dev</span>
<span class="go">sudo apt install qt5-default</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Download source code and navigate to folder, or alternatively clone using Git:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://github.com/palaeoware/trevosim.git</span>
<span class="go">cd trevosim</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Within REvoSim folder create makefile:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">qmake ./trevosim.pro</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Build by running the make command:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">make</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Navigate to bin folder (e.g. trevosim/bin) and launch software by double clicking on file.</p></li>
</ol>
</section>
<section id="compiling-v1-x-v2-x-v3-x-using-qt-creator">
<h4><span class="section-number">3.1.2.4. </span>Compiling v1.X, v2.X, v3.X using Qt Creator<a class="headerlink" href="#compiling-v1-x-v2-x-v3-x-using-qt-creator" title="Link to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>Install Qt 5.X (v1.X, v2.X) or Qt 6.X (v3.X) on your system by running the installer from Qt: <a class="reference external" href="https://www.qt.io/download">https://www.qt.io/download</a></p></li>
<li><p>Download source code, launch Qt Creator, and open the CMakeLists.txt file. Configure build and follow standard debug/release procedure.</p></li>
</ol>
</section>
</section>
<section id="macos">
<h3><span class="section-number">3.1.3. </span>MacOS<a class="headerlink" href="#macos" title="Link to this heading">¶</a></h3>
<p>QT Creator + QT v6.x using Clang and Xcode.</p>
<section id="for-v1-x-2-x-v3-x">
<h4><span class="section-number">3.1.3.1. </span>For v1.X, 2.X, v3.X<a class="headerlink" href="#for-v1-x-2-x-v3-x" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><p>Xcode can be downloaded from the Apple Store or Apple’s developer website (including older versions of Xcode): <a class="reference external" href="https://developer.apple.com/download/">https://developer.apple.com/download/</a>. We recommend always using the latest Xcode available from Apple that has been tested with the Qt version you are using.</p></li>
<li><p>Install Qt 6.X and QT Creator on your system by running the open source development installer from Qt: <a class="reference external" href="https://www.qt.io/download-open-source">https://www.qt.io/download-open-source</a>. An alternative may be to install via homebrew:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>brew<span class="w"> </span>install<span class="w"> </span>qt
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Download or clone the TREvoSim source code using Git from the GitHub repository: <a class="reference external" href="https://github.com/palaeoware/trevosim">https://github.com/palaeoware/trevosim</a></p></li>
<li><p>Run QT Creator and configure the build pipeline. QT Creator should automatically detect your Xcode installation and configure the build chain. However, if you have multiple versions installed – or if you get errors in the steps subsequent to this one – you might need to manually change QT creator to use the desired Xcode Toolkit. To do this, select projects in the left hand toolbar of Qt Creator (ctrl + 5), and then select the kit labelled with the version of Qt you installed, plus “for macos” under the ‘Build and Run’ section.</p></li>
<li><p>In QT Creator using the main menu ‘File → Open File or Project…’ navigating to and select the TREvoSim CMakeLists.txt file in the root of the source code folder. This will open the TREvoSim project within the workspace.</p></li>
<li><p>From QT Creator you can build debug and release version of TREvoSim. The easiest way is via the bottom left ‘Build’ button. Alternatively you can use the ‘Build → Build All Projects…’ from the main menu.</p></li>
<li><p>Once you have built the release version of TREvoSim through QT Creator, and if you wish to make the binary useable outside of the QT Creator environment (either as a standalone distribution or to package in a .dmg), you will need to run the Qt MacOS Deployment tool. This tool automates the process of creating a deployable application package that contains all QT-related dependencies to make TREvoSim run (e.g., QT libraries).</p>
<ul>
<li><p>First step is to copy the newly generated binaries (TREvoSim.app and TREvoSimTest.app) from your build folder to a new one (we called ours ‘deploy’ and will refer to this by name). The build folder should be called ‘build\Desktop_Qt_6_6_2_for-macOS-Release’ if using the QT defaults, where Qt_6_6_2 will change to match your current QT 6 version.</p></li>
<li><p>From the terminal command line ‘’’cd’’’ into the ‘{path to your QT installation}/{QT 6 version}/macos/bin/’ folder containing the macdeployqt6 binary and run the following commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./macdeployqt6<span class="w"> </span><span class="o">{</span>full<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>TREvoSim<span class="w"> </span>binary<span class="o">}</span>/TREvoSim.app<span class="w"> </span>-verbose<span class="o">=</span><span class="m">2</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>You can view the contents of the application package by right clicking the TREvoSim.app and selecting ‘Show Package Contents’. The folder structure should now look like this:</p></li>
</ul>
<figure class="align-default">
<img alt="_images/post_macdeploy.png" src="_images/post_macdeploy.png" />
</figure>
<ul class="simple">
<li><p>You can now test if this has worked successfully by attempting to run the TREvoSim.app binary in the deploy folder. It should run without any missing libraries warnings.</p></li>
<li><p>For more information on how this works see: <a class="reference external" href="https://doc.qt.io/qt-6/macos-deployment.html#the-mac-deployment-tool">https://doc.qt.io/qt-6/macos-deployment.html#the-mac-deployment-tool</a></p></li>
</ul>
</li>
<li><p>[optional] You can now generate a .dmg package to aid distribution of the TREvoSim.app. There are two ways to do this:</p>
<ol class="arabic">
<li><p>Adding the -dmg flag to the macdeployqt6 command as part of the previous step:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./macdeployqt6<span class="w"> </span><span class="o">{</span>full<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>TREvoSim<span class="w"> </span>binary<span class="o">}</span>/TREvoSim.app<span class="w"> </span>-dmg<span class="w"> </span>-verbose<span class="o">=</span><span class="m">2</span>
</pre></div>
</div>
</li>
<li><p>Using a separate .dmg packaging tool and the generate_dmg bash script:</p></li>
</ol>
<blockquote>
<div><ul>
<li><p>We recommend create-dmg (<a class="reference external" href="https://github.com/create-dmg/create-dmg">https://github.com/create-dmg/create-dmg</a>), which can be installed via Homebrew using:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>brew<span class="w"> </span>install<span class="w"> </span>create-dmg
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The .dmg installer package can then be generated by running the following commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="o">{</span>full<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>TREvoSim<span class="w"> </span>repo<span class="o">}</span>/build_utils/macos/
<span class="gp">$ </span>chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>generate_dmg
<span class="gp">$ </span>./generate_dmg
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The .dmg will be created in the ‘deploy’ folder and will be called ‘TREvoSim_Installer.dmg’.</p></li>
<li><p>Note you may need to edit the variables in the generate_dmg bash script to match your folder structure.</p></li>
<li><p>On opening the .dmg installer package you will see the following drag n’ drop installation window:</p></li>
</ul>
</div></blockquote>
<figure class="align-default">
<img alt="_images/installer_macdmg.png" src="_images/installer_macdmg.png" />
</figure>
</li>
</ol>
</section>
</section>
</section>
<section id="development-testing">
<h2><span class="section-number">3.2. </span>Development Testing<a class="headerlink" href="#development-testing" title="Link to this heading">¶</a></h2>
<p>TREvoSim &gt; = v3 come with a suite of development tests that verify the core simulator/generator code. These can be called via one of two methods during the development phase:</p>
<ol class="arabic">
<li><p>As a standalone program - for this we leverage the GoogleTest Mocking and Testing Framework (<a class="reference external" href="https://github.com/google/googletest">https://github.com/google/googletest</a>) which is pulled in automatically by CMake and built alongside the TREvoSim main program - creating a separate standalone test program called TREvoSimTest. This program can be called from the command line on Mac/Linux/Windows, or run by double clicking in Windows.</p>
<blockquote>
<div><ul>
<li><p>Note: we recommend that the MacOS TREvoSimTest program is added to the TREvoSim.app package if you have built from source (see the building for MacOS instructions above). This simply requires you to copy the TREvoSimTest program to the TREvoSim.app/Contents/MacOS folder before running any .dmg creator. To run the test from the terminal you then can use:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./TREvoSim.app/Contents/MacOS/TREvoSimTest
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p>From the QT Creator application. Once the test program has been built (see point 1 above) you can run the test suite with the QT Creator by going to the ‘Tools → Tests → Run All Tests’ from the main menu. This will build the application if not already done so and display the results in the ‘Test Result’ tab which normally appears at the bottom of the workspace. It may be necessary to increase the test timeout settings in QtCreator’s options if using this approach and the tests time out.</p></li>
</ol>
<p>In either of the above approach, the output will report the outcome of each test, and highlight if any have failed. For a more detailed message as to why a test is failing, you can run the software tests from the GUI (see below).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The tests that run are the same that can be called from the TREvoSim program via the ‘Tests’ button on the main tool bar. See also <a class="reference internal" href="software_tests.html#tests"><span class="std std-ref">Tests</span></a>.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="requirementsinstallation.html" class="btn btn-neutral float-left" title="2. Requirements and Installation from Binaries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="algorithmconcepts.html" class="btn btn-neutral float-right" title="4. Algorithm, Concepts, and Experimental Design" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright (TREvoSim documentation) 2024, Russell J. Garwood, Alan R.T. Spencer.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>